{"ast":null,"code":"var _jsxFileName = \"/home/alwin-26/VR /final_task/Lottery_ticket/User_frontend/src/Components/Login/UserLogin.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useHistory } from \"react\";\nimport { Button } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport '../Styles.css';\nimport axios from \"axios\"; // import validator from 'validator';\n\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Auth(props) {\n  _s();\n\n  // const history = useHistory();\n  const [login, setLogin] = useState('');\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [EmailError, setEmailError] = useState('');\n  const [PasswordError, setPasswordError] = useState('');\n\n  const InputChange = event => {\n    switch (event.target.name) {\n      case 'Email':\n        setEmail(event.target.value);\n        setEmailError(\"\");\n        break;\n\n      case 'Password':\n        setPassword(event.target.value);\n        setPasswordError(\"\");\n        break;\n\n      default:\n        break;\n    }\n\n    validationCheck(event.target);\n  };\n\n  const validationCheck = target => {\n    let isValid = true;\n    let userdetail = {\n      Email: State.Email,\n      Password: State.Password\n    };\n\n    if (target.name == 'Email') {\n      if (target.value === item.Email) {\n        toast.warning(\"Enter Email Id\");\n        return 0;\n      }\n    } else if (target.name == 'Password') {\n      if (userdetail.Password == '') {\n        isValid = false;\n        setPasswordError(\"Please enter your Password.\");\n      }\n    }\n  };\n\n  useEffect(() => {\n    getLogin();\n    getdetails();\n  }, []);\n\n  const getdetails = () => {\n    var myData = JSON.parse(localStorage.getItem('savedToken'));\n\n    if (myData) {\n      props.history.push(\"/listTicket\");\n    }\n  };\n\n  const getLogin = () => {\n    axios.get(\"http://localhost:8001/User/getUser\").then(response => {\n      setLogin(response.data);\n    });\n  }; // const emptyToken = () => {\n  //   console.log(\"hii deleted\");\n  //   localStorage.removeItem('savedToken');\n  //   props.history.push('/')\n  //   // localStorage.removeItem('Carts'._id)\n  //   // getItemList()\n  // }\n\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const {\n      email,\n      Password\n    } = State;\n    axios.post('http://localhost:8001/User/logUser', {\n      Email: email,\n      Password: Password\n    }).then(response => {\n      toast.success(\"Success\");\n\n      if (response.data) {\n        let token = response.data.data;\n        localStorage.setItem(\"savedToken\", JSON.stringify(token));\n        axios.defaults.headers.common['Authorization'] = 'Bearer' + token;\n      } //  return response;\n\n\n      props.history.push(\"/listTicket\");\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm-12 center\",\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Login Page\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm-12 center\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            type: \"text\",\n            placeholder: \"Email\",\n            name: \"Email\",\n            value: email,\n            onChange: InputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontsize: 4,\n              color: \"red\"\n            },\n            children: EmailError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            type: \"text\",\n            placeholder: \"Password\",\n            name: \"Password\",\n            value: password,\n            onChange: InputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontsize: 4,\n              color: \"red\"\n            },\n            children: PasswordError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            block: true,\n            size: \"lg\",\n            className: \"btn btn-primary\",\n            type: \"submit\",\n            children: \"Signin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Auth, \"BcjqEC9v3LC817haT7Et8HOg4Gs=\");\n\n_c = Auth;\nexport default Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["/home/alwin-26/VR /final_task/Lottery_ticket/User_frontend/src/Components/Login/UserLogin.js"],"names":["React","useState","useEffect","useHistory","Button","Link","axios","toast","Auth","props","login","setLogin","email","setEmail","password","setPassword","EmailError","setEmailError","PasswordError","setPasswordError","InputChange","event","target","name","value","validationCheck","isValid","userdetail","Email","State","Password","item","warning","getLogin","getdetails","myData","JSON","parse","localStorage","getItem","history","push","get","then","response","data","handleSubmit","preventDefault","post","success","token","setItem","stringify","defaults","headers","common","catch","error","console","log","fontsize","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useHistory } from \"react\";\nimport { Button } from 'react-bootstrap';\n\nimport { Link } from 'react-router-dom';\nimport '../Styles.css';\nimport axios from \"axios\";\n// import validator from 'validator';\nimport { toast } from 'react-toastify';\n\n\nfunction Auth(props) {\n  // const history = useHistory();\n\n  const [login, setLogin] = useState('');\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [EmailError, setEmailError] = useState('');\n  const [PasswordError, setPasswordError] = useState('');\n\n\n  const InputChange = (event) => {\n    switch (event.target.name) {\n      case 'Email':\n        setEmail(event.target.value);\n        setEmailError(\"\");\n        break;\n      case 'Password':\n        setPassword(event.target.value);\n        setPasswordError(\"\")\n        break;\n      default:\n        break;\n    }\n    validationCheck(event.target);\n  }\n\n  const validationCheck = (target) => {\n    let isValid = true;\n    let userdetail = {\n      Email: State.Email,\n      Password: State.Password\n    }\n        if (target.name == 'Email') {\n          if (target.value === item.Email) {\n            toast.warning(\"Enter Email Id\");\n            return 0;\n          } \n        } else if (target.name == 'Password') {\n          if (userdetail.Password=='') {\n            isValid = false;\n            setPasswordError(\"Please enter your Password.\");\n          }\n    }\n  }\n\n  useEffect(() => {\n    getLogin()\n    getdetails()\n\n  }, [])\n\n  const getdetails =() =>{\n    var myData = JSON.parse(localStorage.getItem('savedToken'))\n\n      if(myData){\n          props.history.push(\"/listTicket\")\n      }\n  }\n\n  const getLogin = () => {\n\n    axios.get(\"http://localhost:8001/User/getUser\")\n      .then((response) => {\n        setLogin(response.data)\n      })\n  }\n\n  // const emptyToken = () => {\n  //   console.log(\"hii deleted\");\n  //   localStorage.removeItem('savedToken');\n  //   props.history.push('/')\n  //   // localStorage.removeItem('Carts'._id)\n  //   // getItemList()\n  // }\n\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const {\n      email, Password\n    } = State;\n\n    axios.post('http://localhost:8001/User/logUser', {\n      Email: email,\n      Password: Password,\n\n    })\n      .then((response) => {\n        toast.success(\"Success\");\n        if (response.data) {\n\n          let token = response.data.data;\n          localStorage.setItem(\"savedToken\", JSON.stringify(token))\n          axios.defaults.headers.common['Authorization'] = 'Bearer' + token\n\n        }\n        //  return response;\n        props.history.push(\"/listTicket\")\n       \n      })\n      .catch((error) => {\n        console.log(error)\n      })\n  }\n\n \n\n  return (\n    <div className='container'>\n      <div className='col-sm-12 center'>\n        <h3>Login Page</h3>\n      </div>\n\n      <div className='col-sm-12 center'>\n        <form onSubmit={handleSubmit}>\n          <div className='form-group'>\n            {/* <label> Email </label> */}\n            <input\n              className=\"form-control\"\n              type=\"text\"\n              placeholder=\"Email\"\n              name=\"Email\"\n              value={email}\n              onChange={InputChange}\n          \n            />\n            <div style={{ fontsize: 4, color: \"red\" }}>\n              {EmailError}</div>\n          </div>\n\n          <div className='form-group'>\n            {/* <label> Password </label> */}\n            <input\n              className=\"form-control\"\n              type=\"text\"\n              placeholder=\"Password\"\n              name=\"Password\"\n              value={password}\n              onChange={InputChange}\n            />\n            <div style={{ fontsize: 4, color: \"red\" }}>\n              {PasswordError}</div>\n\n          </div>\n          <div className='form-group'>\n            <Button block size=\"lg\"\n              className=\"btn btn-primary\"\n              type='submit' >Signin</Button> </div>\n\n        </form>\n      </div>\n      {/* <div className=\"col-md-12 right\">\n          <Button\n            class=\"btn btn-success\"\n            onClick={emptyToken}>LogOut</Button> </div> */}\n    </div>\n  )\n\n}\nexport default Auth;"]},"metadata":{},"sourceType":"module"}